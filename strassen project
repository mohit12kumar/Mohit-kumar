#include <stdio.h>

void add1(int A[2][2], int B[2][2], int C[2][2]) { for (int i = 0; i < 2; i++)
for (int j = 0; j < 2; j++)

{

C[i][j] = A[i][j] + B[i][j];

printf("%d\t",C[i][j]);

}

}



void subtract1(int A[2][2], int B[2][2], int C[2][2]) { for (int i = 0; i < 2; i++)
for (int j = 0; j < 2; j++)

{

C[i][j] = A[i][j] - B[i][j];

//printf("%d\t",C[i][j]);

}

}
 


void strassen1(int a[2][2],int b[2][2],int c[2][2])

{

int m1,m2,m3,m4,m5,m6,m7;

m1=(a[0][0] + a[1][1])* (b[0][0] +b[1][1]);

m2=(a[1][0]+a[1][1])*b[0][0];

m3=a[0][0]*(b[0][1]-b[1][1]);

m4=a[1][1]*(b[1][0]-b[0][0]);

m5=(a[0][0]+a[0][1])*b[1][1]; m6=(a[1][0]-a[0][0])*(b[0][0]+b[0][1]);
m7=(a[0][1]-a[1][1])*(b[1][0]+b[1][1]);



c[0][0]=m1+m4-m5+m7; c[0][1]=m3+m5;
c[1][0]=m2+m4; c[1][1]=m1-m2+m3+m6;
}



void strassen(int A[4][4], int B[4][4], int C[4][4])

{

int M[7][2][2];

int A11[2][2], A12[2][2], A21[2][2], A22[2][2];

int B11[2][2], B12[2][2], B21[2][2], B22[2][2];

int C11[2][2], C12[2][2], C21[2][2], C22[2][2];

int temp1[2][2], temp2[2][2];
 
// Divide the matrices into quadrants for (int i = 0; i < 2; i++) {
for (int j = 0; j < 2; j++) { A11[i][j] = A[i][j];
A12[i][j] = A[i][j + 2];

A21[i][j] = A[i + 2][j];

A22[i][j] = A[i + 2][j + 2];

B11[i][j] = B[i][j];

B12[i][j] = B[i][j + 2];

B21[i][j] = B[i + 2][j];

B22[i][j] = B[i + 2][j + 2];

}

}

// Calculate M1 to M7

add1(A11, A22, temp1); // A11 + A22 add1(B11, B22, temp2); // B11 + B22
strassen1(temp1, temp2, M[4]); // M5 = (A11 + A22)(B11 + B22)



add1(A21, A22, temp1); // A21 + A22 strassen1(temp1, B11, M[2]); // M3 = (A21 + A22)B11


subtract1(B12, B22, temp2); // B12 - B22 strassen1(A11, temp2, M[0]); // M2 = A11(B12 - B22)


subtract1(B21, B11, temp2); // B21 - B11 strassen1(A22, temp2, M[3]); // M4 = A22(B21 - B11)
 


add1(A11, A12, temp1); // A11 + A12 strassen1(temp1, B22, M[1]); // M2 = (A11 + A12)B22


subtract1(A11, A21, temp1); // A21 - A11 add1(B11, B12, temp2); // B11 + B12
strassen1(temp1, temp2, M[6]); // M7 = (A21 - A11)(B11 + B12)



subtract1(A12, A22, temp1); // A12 - A22 add1(B21, B22, temp2); // B21 + B22
strassen1(temp1, temp2, M[5]); // M6 = (A12 - A22)(B21 + B22)







// Combine results into C add1(M[4],M[3],temp1);
subtract1(temp1,M[1],temp2); add1(temp2,M[5],C11);


add1(M[0],M[1],C12);



add1(M[2],M[3],C21);



add1(M[4],M[3],temp1); subtract1(temp1,M[2],temp2); subtract1(temp2,M[6],C22);
 




// Fill in the resulting matrix C for (int i = 0; i < 2; i++) {
for (int j = 0; j < 2; j++) { C[i][j] = C11[i][j];
C[i][j + 2] = C12[i][j];

C[i + 2][j] = C21[i][j];

C[i + 2][j + 2] = C22[i][j];



}

}

}



void printMatrix(int matrix[4][4]) { for (int i = 0; i < 4; i++) {
for (int j = 0; j < 4; j++) { printf(" %d\t", matrix[i][j]);
}

printf("\n");

}

}



int main() {

int B[4][4] = {

{1, 2, 1, 2},
 
	{3,	4,	3,	4},
	{1,	2,	1,	2},
	{3,	4,	3,	4}
};

int	

A[4][4] =	

{
	
{1,	
2,	
1,	
2},
	{3,	4,	3,	4},
	{1,	2,	1,	2},
	{3,	4,	3,	4}
};				

int C[4][4] = {0};

printf(" Matrix a:\n"); printMatrix(A); printf(" Matrix b:\n"); printMatrix(B);


strassen(A, B, C);



printf("Resultant Matrix C:\n"); printMatrix(C);


return 0;

}
